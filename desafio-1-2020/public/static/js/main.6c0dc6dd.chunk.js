(this["webpackJsonpui-template"]=this["webpackJsonpui-template"]||[]).push([[0],{54:function(e,t,a){e.exports=a(93)},59:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(48),l=a.n(s),i=(a(59),a(7)),o=a(99),c=a(9),u=a.n(c),m=a(34),d=a(11),p=a(36),b=a(40),f=a(98),g=a(101),h=a(102),E="Algo sali\xf3 mal al comunicarse con el servidor. Aseg\xfarate de que tu conexi\xf3n sea estable e intenta nuevamente.",v=function(e){var t=e.setNotification,a=Object(n.useState)(""),s=Object(i.a)(a,2),l=s[0],o=s[1],c=Object(n.useState)({}),v=Object(i.a)(c,2),y=v[0],x=v[1],j=Object(n.useState)([]),O=Object(i.a)(j,2),k=O[0],w=O[1],S=Object(n.useState)(!1),C=Object(i.a)(S,2),T=C[0],I=C[1],N=function(){var e=Object(d.a)(u.a.mark((function e(a,n){var s,l,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/message",{method:"POST",body:JSON.stringify({msg:a}),headers:{"Content-Type":"application/json"}});case 2:if(!0===(s=e.sent).ok){e.next=7;break}t({type:"error",title:"Error",msg:E}),e.next=11;break;case 7:return e.next=9,s.json();case 9:!0===(l=e.sent).err?t({type:"error",title:"Error",msg:"La sesi\xf3n ha expirado. Haga clic en el bot\xf3n de arriba para crear una nueva sesi\xf3n."}):(x(l.result),i=Object(m.a)(n),l.result.output.generic.forEach((function(e){"text"!==e.response_type?t({type:"warning",title:"Mensaje de tipo desconocido recibido",msg:r.a.createElement(r.a.Fragment,null,"Mensajes de tipo"," ",r.a.createElement("span",{style:{fontStyle:"italic"}},e.response_type)," ","no son compatibles")}):i.push({from:"watson",msg:e.text})})),w(i));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w([]),x({}),e.next=4,fetch("/api/session",{method:"POST"});case 4:if(!0===(a=e.sent).ok){e.next=9;break}t({type:"error",title:"Error",msg:E}),e.next=13;break;case 9:return e.next=11,a.json();case 11:!0===e.sent.err?t({type:"error",title:"Error",msg:"No se pudo iniciar una sesi\xf3n. Aseg\xfarese de que sus credenciales sean correctas"}):N("",[]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&((a=Object(m.a)(k)).push({from:"user",msg:t}),w(a),o(""),N(t,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){I(!0),A().finally((function(){return I(!1)}))}),[]),Object(n.useEffect)((function(){var e=document.getElementById("chat-container");e.scrollTop=e.scrollHeight}),[k,l]);var B=null;return!0===T&&(B=r.a.createElement(f.a,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bx--row",id:"chat-container",style:{height:"45%",overflow:"auto"}},r.a.createElement("div",{className:"bx--col",style:{overflow:"auto"}},r.a.createElement("div",{className:"chat"},r.a.createElement("button",{onClick:function(){I(!0),A().finally((function(){return I(!1)}))},className:"renew-session"},r.a.createElement(p.a,null)),B,k.map((function(e,t){return r.a.createElement("p",{key:e.msg+t+Date.now(),className:e.from},e.msg)}))))),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(g.a,{id:"message",labelText:null,placeholder:"Escribe un mensaje...",onKeyPress:function(e){"Enter"===e.key&&D(l)},value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{className:"send-message",style:{visibility:""===l?"hidden":"visible"},onClick:function(){return D(l)}},r.a.createElement(b.a,null))),r.a.createElement("div",{className:"bx--row",style:{marginTop:"1rem",marginBottom:"1rem"}},r.a.createElement("div",{className:"bx--col"},r.a.createElement("h3",null,"JSON de la \xfaltima respuesta:"),r.a.createElement(h.a,{type:"multi",showMoreText:"Mostrar m\xe1s",showLessText:"Mostrar menos",copyButtonDescription:"Copiar al portapapeles",copyLabel:"Copiar",feedback:"Copiado!",onClick:function(){return navigator.clipboard.writeText(JSON.stringify(y,null,2))}},JSON.stringify(y,null,2)))))},y=a(50),x=a.n(y),j=a(52),O=a.n(j),k=a(100),w=a(14),S=function(e){var t=e.setNotification,a=Object(n.useState)(""),s=Object(i.a)(a,2),l=s[0],o=s[1],c=Object(n.useState)(""),m=Object(i.a)(c,2),p=m[0],b=m[1],h=Object(n.useState)(""),v=Object(i.a)(h,2),y=v[0],j=v[1],S=Object(n.useState)(""),C=Object(i.a)(S,2),T=C[0],I=C[1],N=Object(n.useState)(""),A=Object(i.a)(N,2),D=A[0],B=A[1],q=Object(n.useState)(!1),P=Object(i.a)(q,2),H=P[0],M=P[1],J=function(){var e=Object(d.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,fetch("/api/credentials",{method:"POST",body:JSON.stringify({password:D,apikey:l,url:p,assistantId:y,skill:T}),headers:{"Content-Type":"application/json"}});case 3:if(a=e.sent,M(!1),!0===a.ok){e.next=9;break}t({type:"error",title:"Error",msg:E}),e.next=13;break;case 9:return e.next=11,a.json();case 11:!0===(n=e.sent).err?t({type:"error",title:"Error",msg:n.msg}):t({type:"success",title:"\xc9xito",msg:n.msg});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=null;return!0===H&&(L=r.a.createElement(f.a,{description:"Cargando..."})),r.a.createElement(w.Header,{"aria-label":"Maratona Behind the Code 2020 Desaf\xedo 1"},r.a.createElement(w.HeaderName,{href:"/",prefix:"Maratona Behind the Code 2020"},"Desaf\xedo 1"),r.a.createElement(w.HeaderGlobalBar,null,r.a.createElement(w.HeaderGlobalAction,{"aria-label":"GitHub",onClick:function(){return window.open("https://github.com/maratonadev-la/desafio-1-2020")}},r.a.createElement(x.a,null)),r.a.createElement(k.a,{modalLabel:"Modificar credenciales",modalHeading:"Para usar un asistente diferente, ingresa tus credenciales de Watson Assistant y tu contrase\xf1a",primaryButtonText:"Enviar",secondaryButtonText:"Cancelar",iconDescription:"Modificar credenciales",renderTriggerButtonIcon:function(){return r.a.createElement(O.a,null)},buttonTriggerClassName:"icon-button",style:{textAlign:"left"},handleSubmit:J},r.a.createElement(g.a,{id:"apikey",placeholder:"Inserta tu API key aqu\xed...",labelText:"Clave API del servicio Watson Assistant (API KEY)",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(g.a,{id:"url",placeholder:"Inserta tu URL aqu\xed...",labelText:"URL para la llamada a la API del servicio Watson Assistant",value:p,onChange:function(e){return b(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(g.a,{id:"assistantId",placeholder:"Inserta tu Assistant ID aqu\xed...",labelText:"ID del Watson Assistant (Assistant ID)",value:y,onChange:function(e){return j(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(g.a,{id:"skill",placeholder:"Inserta tu Skill ID aqu\xed...",labelText:"ID de la skill del Watson Assistant (Skill ID)",value:T,onChange:function(e){return I(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(g.a,{id:"password",type:"password",placeholder:"Inserta tu contrase\xf1a aqu\xed...",labelText:"Contrase\xf1a elegida durante el despliegue",value:D,onChange:function(e){return B(e.target.value)}}),L)))},C=function(e){var t=e.setNotification,a=Object(n.useState)(""),s=Object(i.a)(a,2),l=s[0],o=s[1],c=Object(n.useState)(!1),m=Object(i.a)(c,2),p=m[0],b=m[1],h=function(){var e=Object(d.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify({password:l}),headers:{"Content-Type":"application/json"}});case 3:if(!0===(a=e.sent).ok){e.next=8;break}t({type:"error",title:"Error",msg:E}),e.next=12;break;case 8:return e.next=10,a.json();case 10:!0===(n=e.sent).err?t({type:"error",title:"Error",msg:n.msg}):t({type:"success",title:"\xa1Ya casi terminamos!",msg:n.msg});case 12:b(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=null;return!0===p&&(v=r.a.createElement(f.a,{description:"Enviando..."})),r.a.createElement("div",{className:"bx--header-panel bx--header-panel--expanded side-panel",style:{zIndex:2}},r.a.createElement("h2",null,"Desaf\xedo 1 | Alestra"),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"center"}},"Desarrolla un asistente virtual que identifica y responde adecuadamente a los intents de Saludo, Adios y Request. Para el intent de Request el asistente debe responder informando el tipo de solicitud y aplicaci\xf3n, junto con un n\xfamero de ticket generado para esta solicitud."),r.a.createElement("br",null),r.a.createElement(k.a,{shouldSubmitOnEnter:!0,buttonTriggerText:"Enviar",modalHeading:"Atenci\xf3n: Despu\xe9s de hacer clic en enviar, recibir\xe1s un correo electr\xf3nico pidi\xe9ndote que confirmes tu env\xedo haciendo clic en un enlace. Debes hacer clic en el enlace para completar el env\xedo.",modalLabel:"Env\xedo",primaryButtonText:"Enviar",secondaryButtonText:"Cancelar",handleSubmit:h,style:{zIndex:99999}},r.a.createElement(g.a,{id:"password",type:"password",value:l,onChange:function(e){return o(e.target.value)},labelText:"Ingresa la contrase\xf1a elegida durante el despliegue para enviar",placeholder:"Inserta tu contrase\xf1a aqu\xed..."}),v))};var T=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],s=t[1],l=null;return a&&(l=r.a.createElement(o.a,{lowContrast:!0,kind:a.type,title:a.title,subtitle:a.msg,caption:null,style:{zIndex:1e4,position:"fixed",bottom:"1rem",right:"17rem"},onCloseButtonClick:function(){return s(null)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{setNotification:s}),r.a.createElement(C,{setNotification:s}),r.a.createElement("div",{className:"bx--grid",style:{marginTop:"5rem",marginRight:"16rem",paddingBottom:"1rem",height:"calc(100vh - 5rem)",position:"relative"}},r.a.createElement(v,{setNotification:s}),l))};l.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.6c0dc6dd.chunk.js.map